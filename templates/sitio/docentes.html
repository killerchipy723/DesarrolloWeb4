{% include 'sitio/cabecera.html' %}

<div class="container mt-4">
  <div class="card shadow">
    <div class="card-body">      
      <form action="/reg_docente" method="post">
        <div class="row mb-3">
          <div class="col">
            <label for="">Nombre</label>
            <input type="text" name="nombre" class="form-control mb-3" required>
          </div>
          <div class="col">
            <label for="">DNI</label>
            <input type="number" name="dni" class="form-control mb-3" required>
          </div>
          <div class="col">
            <label for="">Correo Electrónico</label>
            <input type="email" name="correo" class="form-control mb-3" required>
          </div>
          <div class="col">
            <button class="btn btn-primary mb-3 mt-4" type="submit">Registrar</button>
          </div>
        </div>
      </form>

      <table class="table table-bordered">                  
        <thead>
          <th scope="col">ID</th>
          <th scope="col">NOMBRE</th>
          <th scope="col">DNI</th>
          <th scope="col">CORREO</th>
          <th scope="col">ACCIONES</th>       
        </thead>
        <tbody>
          {% for doc in docente %}
          <tr>
            <td>{{doc[0]}}</td>
            <td>{{doc[1]}}</td>
            <td>{{doc[2]}}</td>
            <td>{{doc[3]}}</td>
            <td>
              <a class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#modal{{doc[0]}}">EDITAR</a>                                  
              <!-- Botón que abre el modal de confirmación -->
              <a class="btn btn-danger btn-sm" href="#" 
                 data-bs-toggle="modal" 
                 data-bs-target="#modal2{{doc[0]}}" 
                 data-id="{{doc[0]}}">ELIMINAR</a>
            </td>
          </tr>

          <!-- MODAL EDITAR -->
          <div class="modal fade" id="modal{{doc[0]}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5">{{doc[1]}}</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form action="/Update_Docente/{{doc[0]}}" method="post">
                    <label>Nombre</label>
                    <input type="text" name="name" class="form-control mb-3" required value="{{doc[1]}}">
                    <label>DNI</label>
                    <input type="text" name="document" class="form-control mb-3" required value="{{doc[2]}}">
                    <label>Correo Electrónico</label>
                    <input type="email" name="email" class="form-control mb-3" required value="{{doc[3]}}">
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary">Actualizar</button>
                </div>
                </form>
              </div>
            </div>
          </div>

          <!-- MODAL CONFIRMACIÓN ELIMINAR -->
          <div class="modal fade" id="modal2{{doc[0]}}" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                  <h5 class="modal-title">Eliminar a: {{doc[1]}}</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  ¿Está seguro de que desea eliminar este registro?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <a href="/delete_doc/{{doc[0]}}" class="btn btn-danger">Sí, eliminar</a>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% include 'sitio/pie.html' %}
